{"version":3,"sources":["FilterForm.js","PersonForm.js","Persons.js","services/persons.js","Notification.js","App.js","index.js"],"names":["FilterForm","filterChangeHandle","filterName","type","onChange","value","PersonForm","addNewPersonHandle","newName","nameChangeHandle","newNumber","numberChangeHandle","onSubmit","Persons","personsToShow","deletePersonHandle","length","map","p","i","name","number","onClick","id","baseUrl","axios","get","then","res","data","newPersonObj","post","itemUrl","delete","newObj","put","Notification","text","style","padding","borderColor","color","backgroundColor","borderRadius","borderWidth","borderStyle","fontSize","App","useState","persons","setPersons","setNewNumber","setNewName","setFilterName","showAll","setShowAll","notiMsg","setNotiMsg","useEffect","personsService","returnedPersons","catch","error","alert","console","log","filter","toLowerCase","includes","resetForm","e","target","preventDefault","existPerson","person","confirmMsg","window","confirm","updatedPersonObj","returnedPerson","response","setTimeout","personId","find","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"+KAaeA,EAXI,SAAC,GAAwC,IAAtCC,EAAqC,EAArCA,mBAAoBC,EAAiB,EAAjBA,WACxC,OACE,+BACE,iDACmB,IACjB,uBAAOC,KAAK,OAAOC,SAAUH,EAAoBI,MAAOH,UCkBjDI,EAvBI,SAAC,GAMb,IALLC,EAKI,EALJA,mBACAC,EAII,EAJJA,QACAC,EAGI,EAHJA,iBACAC,EAEI,EAFJA,UACAC,EACI,EADJA,mBAEA,OACE,uBAAMC,SAAUL,EAAhB,UACE,yCACQ,uBAAOJ,KAAK,OAAOE,MAAOG,EAASJ,SAAUK,OAErD,0CACU,IACR,uBAAON,KAAK,OAAOE,MAAOK,EAAWN,SAAUO,OAEjD,8BACE,wBAAQR,KAAK,SAAb,uBCDOU,EAhBC,SAAC,GAA0C,IAAxCC,EAAuC,EAAvCA,cAAcC,EAAyB,EAAzBA,mBAC/B,OACE,mCAC4B,IAAzBD,EAAcE,OACbF,EAAcG,KAAI,SAACC,EAAGC,GAAJ,OAChB,8BACGD,EAAEE,KADL,MACcF,EAAEG,OADhB,IACwB,wBAAQC,QAAS,kBAAIP,EAAmBG,EAAEK,KAA1C,sBADhBJ,MAKV,iD,gBCXFK,EAAU,eA+BD,EA7BD,WAEV,OADYC,IAAMC,IAAIF,GACXG,MAAK,SAAAC,GAAG,OAAEA,EAAIC,SA2Bd,EAxBD,SAACC,GAGX,OAFYL,IAAMM,KAAKP,EAAQM,GAEpBH,MAAK,SAAAC,GACZ,OAAGA,EAAIC,KACID,EAAIC,KAELD,MAiBH,EAZA,SAACL,GACZ,IAAMS,EAAO,UAAMR,EAAN,YAAiBD,GAE9B,OADYE,IAAMQ,OAAOD,GACdL,MAAK,SAAAC,GAAG,OAAEA,EAAIC,SASd,EANA,SAACN,EAAGW,GACf,IAAMF,EAAO,UAAMR,EAAN,YAAiBD,GAE9B,OADYE,IAAMU,IAAIH,EAAQE,GACnBP,MAAK,SAAAC,GAAG,OAAEA,EAAIC,SCEdO,EA7BM,SAAC,GAAiB,IAAhBjC,EAAe,EAAfA,KAAKkC,EAAU,EAAVA,KAsBxB,OACI,qBAAKC,MAAc,YAAPnC,EAAA,eArBC,CACboC,QAAQ,OACRC,YAAa,QACbC,MAAO,QACPC,gBAAgB,SAChBC,aAAa,MACbC,YAAY,MACZC,YAAY,QACZC,SAAS,SAaG,eAXI,CAChBP,QAAQ,OACRC,YAAY,MACZC,MAAM,MACLC,gBAAgB,SACjBC,aAAa,MACbC,YAAY,MACZC,YAAY,QACZC,SAAS,SAGT,SACKT,KCkIEU,EArJH,WAAO,IAAD,EACcC,mBAAS,IADvB,mBACTC,EADS,KACAC,EADA,OAEkBF,mBAAS,IAF3B,mBAETtC,EAFS,KAEEyC,EAFF,OAGcH,mBAAS,IAHvB,mBAGTxC,EAHS,KAGA4C,EAHA,OAIoBJ,mBAAS,IAJ7B,mBAIT9C,EAJS,KAIGmD,EAJH,OAKaL,oBAAS,GALtB,mBAKTM,EALS,KAKDC,EALC,OAMWP,mBAAS,CAAC7C,KAAK,KAAKkC,KAAK,OANpC,mBAMTmB,EANS,KAMDC,EANC,KAQhBC,qBAAU,WACRC,IAAwBhC,MAAK,SAAAiC,GAC3BV,EAAWU,MACVC,OAAM,SAAAC,GACPC,MAAM,gCACNC,QAAQC,IAAIH,QAGb,IAEH,IAAMhD,EAAgBwC,EAAUL,EAAUA,EAAQiB,QAAO,SAAAhD,GAAC,OAAEA,EAAEE,KAAK+C,cAAcC,SAASlE,EAAWiE,kBAoG/FE,EAAW,WACdjB,EAAW,IACXD,EAAa,KAKhB,OACE,gCACE,2CACCK,GAAWA,EAAQnB,MAAQ,cAAC,EAAD,CAAcA,KAAMmB,EAAQnB,KAAMlC,KAAMqD,EAAQrD,OAC5E,cAAC,EAAD,CACEF,mBA9CqB,SAACqE,GAC1BjB,EAAciB,EAAEC,OAAOlE,OACvBkD,GAAW,IA6CPrD,WAAYA,IAGd,gDACA,cAAC,EAAD,CACEK,mBApHqB,SAAC+D,GAC1BA,EAAEE,iBACF,IAAMC,EAAcxB,EAAQiB,QAAO,SAACQ,GAAD,OAAYA,EAAOtD,OAASZ,KAAS,GAExE,GAAIiE,GAAaA,EAAYrD,KAAM,CACjC,IAAMuD,EAAU,UAAMF,EAAYrD,KAAlB,0EAEhB,GADmBwD,OAAOC,QAAQF,GACpB,CAEZ,IAAMG,EAAgB,2BAAOL,GAAP,IAAmBrD,KAAKqD,EAAYrD,KAAKC,OAAOX,IAetE,YAdAiD,EAAsBc,EAAYlD,GAAGuD,GAAkBnD,MAAK,SAAAoD,GAC1D7B,EAAWD,EAAQhC,KAAI,SAAAC,GAAC,OAAEA,EAAEE,OAAOqD,EAAYrD,KAAOF,EAAI6D,MAC1DV,OACCR,OAAM,SAAAC,GACPE,QAAQC,IAAIH,EAAMkB,UAClBvB,EAAW,CACTtD,KAAK,OACLkC,KAAK,8BAAD,OAA+ByB,EAAMkB,SAASnD,KAAKiC,SAEzDmB,YAAW,WACXxB,EAAW,CAACtD,KAAK,KAAKkC,KAAK,SAC1B,SAMP,IAAMP,EAAe,CAAEV,KAAMZ,EAASa,OAAQX,GAE9CiD,EAAsB7B,GACnBH,MAAK,SAAAoD,GACJ7B,EAAW,GAAD,mBAAKD,GAAL,CAAc8B,KACxBtB,EAAW,CACPtD,KAAK,UACLkC,KAAK,SAAD,OAAU0C,EAAe3D,QAEjC6D,YAAW,WACTxB,EAAW,CAACtD,KAAK,KAAKkC,KAAK,SAC1B,KACHgC,OAEDR,OAAM,SAAAC,GAENL,EAAW,CACRtD,KAAK,OACLkC,KAAK,iBAAD,OAAkBP,EAAaV,KAA/B,aAAwC0C,EAAMkB,SAASnD,KAAKiC,SAEpEmB,YAAW,WACTxB,EAAW,CAACtD,KAAK,KAAKkC,KAAK,SAC1B,KACHa,EAAW,YAAID,QAmEbzC,QAASA,EACTC,iBA9DmB,SAAC6D,GACxBlB,EAAWkB,EAAEC,OAAOlE,QA8DhBK,UAAWA,EACXC,mBA5DqB,SAAC2D,GAC1BnB,EAAamB,EAAEC,OAAOlE,UA8DpB,yCACA,cAAC,EAAD,CAASS,cAAeA,EAAeC,mBAvDjB,SAACmE,GACzB,IAAMP,EAAU,uEAAkEO,EAAlE,KACGN,OAAOC,QAAQF,IAEhChB,EAAsBuB,GAAUvD,MAAK,WACnCuB,EAAWD,EAAQiB,QAAO,SAAAhD,GAAC,OAAEA,EAAEK,KAAK2D,MACnCzB,EAAW,CACVtD,KAAK,UACLkC,KAAK,kBAAD,OAAmBY,EAAQkC,MAAK,SAAAjE,GAAC,OAAEA,EAAEK,KAAO2D,KAAU9D,KAAtD,mCAEP6D,YAAW,WACVxB,EAAW,CAACtD,KAAK,KAAKkC,KAAK,SAC1B,QACAwB,OAAM,SAAAC,GACPL,EAAW,CACTtD,KAAK,OACLkC,KAAK,kBAAD,OAAmBY,EAAQkC,MAAK,SAAAjE,GAAC,OAAEA,EAAEK,KAAO2D,KAAU9D,KAAtD,mCAEP6D,YAAW,WACVxB,EAAW,CAACtD,KAAK,KAAKkC,KAAK,SAC1B,KACDa,EAAW,YAAID,IACfe,QAAQC,IAAIH,aCjHpBsB,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.83729bd5.chunk.js","sourcesContent":["import React from \"react\";\n\nconst FilterForm = ({ filterChangeHandle, filterName }) => {\n  return (\n    <form>\n      <p>\n        Filter show with{\" \"}\n        <input type=\"text\" onChange={filterChangeHandle} value={filterName} />\n      </p>\n    </form>\n  );\n};\n\nexport default FilterForm;\n","import React from \"react\";\n\nconst PersonForm = ({\n  addNewPersonHandle,\n  newName,\n  nameChangeHandle,\n  newNumber,\n  numberChangeHandle,\n}) => {\n  return (\n    <form onSubmit={addNewPersonHandle}>\n      <div>\n        name: <input type=\"text\" value={newName} onChange={nameChangeHandle} />\n      </div>\n      <div>\n        number:{\" \"}\n        <input type=\"text\" value={newNumber} onChange={numberChangeHandle} />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  );\n};\n\nexport default PersonForm;\n","import React from \"react\";\n\nconst Persons = ({ personsToShow,deletePersonHandle }) => {\n  return (\n    <>\n      {personsToShow.length !== 0 ? (\n        personsToShow.map((p, i) => (\n          <p key={i}>\n            {p.name} - {p.number} <button onClick={()=>deletePersonHandle(p.id)}>Delete</button>\n          </p>\n        ))\n      ) : (\n        <p>List is empty</p>\n      )}\n    </>\n  );\n};\n\nexport default Persons;\n","import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll =()=>{\n    const req = axios.get(baseUrl)\n    return req.then(res=>res.data)\n}\n\nconst create =(newPersonObj)=>{\n    const req = axios.post(baseUrl,newPersonObj)\n  \n    return req.then(res=>{\n        if(res.data){\n            return res.data\n        }else{\n          return  res //to access error message\n        }\n        })\n}\n\nconst remove = (id)=>{\n    const itemUrl = `${baseUrl}/${id}`\n    const req = axios.delete(itemUrl)\n    return req.then(res=>res.data)\n}\n\nconst update = (id,newObj)=>{\n    const itemUrl = `${baseUrl}/${id}`\n    const req = axios.put(itemUrl,newObj)\n    return req.then(res=>res.data)\n}\n\nexport default {getAll,create,remove,update}","import React from 'react'\n\nconst Notification = ({type,text}) => {\n    \n    const addStyle = {\n        padding:'20px',\n        borderColor: 'green',\n        color: 'green' ,\n        backgroundColor:'silver',\n        borderRadius:'5px',\n        borderWidth:'5px',\n        borderStyle:'solid',\n        fontSize:'20px'\n    }\n    const removeStyle = {\n        padding:'20px',\n        borderColor:'red',\n        color:'red',\n         backgroundColor:'silver',\n        borderRadius:'5px',\n        borderWidth:'5px',\n        borderStyle:'solid',\n        fontSize:'20px'\n    }\n    return (\n        <div style={type==='success' ? {...addStyle} : {...removeStyle}}>\n            {text}\n        </div>\n    )\n}\n\nexport default Notification\n","import { useState, useEffect } from \"react\";\nimport FilterForm from \"./FilterForm\";\nimport PersonForm from \"./PersonForm\";\nimport Persons from \"./Persons\";\n\nimport personsService from './services/persons'\nimport Notification from './Notification'\nconst App = () => {\n  const [persons, setPersons] = useState([]); \n  const [newNumber, setNewNumber] = useState(\"\");\n  const [newName, setNewName] = useState(\"\");\n  const [filterName, setFilterName] = useState(\"\");\n  const [showAll,setShowAll] = useState(true)\n  const [notiMsg,setNotiMsg]=useState({type:null,text:null})\n\n  useEffect(() => {\n    personsService.getAll().then(returnedPersons=>{\n      setPersons(returnedPersons)\n    }).catch(error=>{\n      alert('error in getting all persons')\n      console.log(error)\n    })\n   \n  }, []);\n\n  const personsToShow = showAll ? persons : persons.filter(p=>p.name.toLowerCase().includes(filterName.toLowerCase()))\n\n  const addNewPersonHandle = (e) => {\n    e.preventDefault();\n    const existPerson = persons.filter((person) => person.name === newName)[0]\n    \n    if (existPerson&&existPerson.name) {\n      const confirmMsg = `${existPerson.name} is already added to phonebook, replace the old number with a new one?`\n      const confirmRes = window.confirm(confirmMsg)\n      if(confirmRes){\n        //update the phone number\n        const updatedPersonObj = {...existPerson,name:existPerson.name,number:newNumber}\n        personsService.update(existPerson.id,updatedPersonObj).then(returnedPerson=>{\n          setPersons(persons.map(p=>p.name!==existPerson.name ? p : returnedPerson))\n          resetForm()\n        }).catch(error=>{\n          console.log(error.response)\n          setNotiMsg({\n            type:'fail',\n            text:`Failed to update the info. ${error.response.data.error}`\n          })\n          setTimeout(() => {\n          setNotiMsg({type:null,text:null})\n        }, 5000)\n        })       \n       \n        return\n      }\n    }\n    const newPersonObj = { name: newName, number: newNumber }\n    //call to server\n    personsService.create(newPersonObj)\n      .then(returnedPerson=>{\n        setPersons([...persons, returnedPerson ]);\n        setNotiMsg({\n            type:'success',\n            text:`Added ${returnedPerson.name}`\n          })\n        setTimeout(() => {\n          setNotiMsg({type:null,text:null})\n        }, 5000)\n        resetForm()\n      })\n      .catch(error=>{\n        //console.log(error.response.data)\n       setNotiMsg({\n          type:'fail',\n          text:`Failed to add ${newPersonObj.name}. ${error.response.data.error}`\n        })\n      setTimeout(() => {\n        setNotiMsg({type:null,text:null})\n      }, 5000)\n      setPersons([...persons])\n      \n    })\n   \n  };\n\n  const nameChangeHandle = (e) => {\n    setNewName(e.target.value);\n  };\n\n  const numberChangeHandle = (e) => {\n    setNewNumber(e.target.value);\n  };\n\n  const filterChangeHandle = (e) => {\n    setFilterName(e.target.value);\n    setShowAll(false)\n   };\n\n  const deletePersonHandle =(personId)=>{\n    const confirmMsg =`Are you sure that you want to delete this person whose id is ${personId}?`\n    const confirmRes = window.confirm(confirmMsg)\n    if(confirmRes){\n      personsService.remove(personId).then(()=>{\n        setPersons(persons.filter(p=>p.id!==personId))\n         setNotiMsg({\n          type:'success',\n          text:`Information of ${persons.find(p=>p.id === personId).name} has been removed from server`\n        })\n       setTimeout(() => {\n        setNotiMsg({type:null,text:null})\n      }, 5000)\n      }).catch(error=>{\n        setNotiMsg({\n          type:'fail',\n          text:`Information of ${persons.find(p=>p.id === personId).name} has been removed from server`\n        })\n       setTimeout(() => {\n        setNotiMsg({type:null,text:null})\n      }, 5000)\n        setPersons([...persons])\n        console.log(error)\n      })\n      \n    \n    }\n  }\n\n  const resetForm =()=>{\n     setNewName(\"\");\n     setNewNumber(\"\");\n  }\n\n \n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      {notiMsg && notiMsg.text && <Notification text={notiMsg.text} type={notiMsg.type}/>}\n      <FilterForm\n        filterChangeHandle={filterChangeHandle}\n        filterName={filterName}\n      />\n\n      <h3>Add new person</h3>\n      <PersonForm\n        addNewPersonHandle={addNewPersonHandle}\n        newName={newName}\n        nameChangeHandle={nameChangeHandle}\n        newNumber={newNumber}\n        numberChangeHandle={numberChangeHandle}\n      />\n\n      <h2>Numbers</h2>\n      <Persons personsToShow={personsToShow} deletePersonHandle={deletePersonHandle}/>\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}