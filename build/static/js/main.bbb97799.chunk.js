(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{42:function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),c=n(18),a=n.n(c),i=n(8),u=n(5),l=n(3),s=n(0),d=function(e){var t=e.filterChangeHandle,n=e.filterName;return Object(s.jsx)("form",{children:Object(s.jsxs)("p",{children:["Filter show with"," ",Object(s.jsx)("input",{type:"text",onChange:t,value:n})]})})},b=function(e){var t=e.addNewPersonHandle,n=e.newName,r=e.nameChangeHandle,o=e.newNumber,c=e.numberChangeHandle;return Object(s.jsxs)("form",{onSubmit:t,children:[Object(s.jsxs)("div",{children:["name: ",Object(s.jsx)("input",{type:"text",value:n,onChange:r})]}),Object(s.jsxs)("div",{children:["number:"," ",Object(s.jsx)("input",{type:"text",value:o,onChange:c})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})]})},f=function(e){var t=e.personsToShow,n=e.deletePersonHandle;return Object(s.jsx)(s.Fragment,{children:0!==t.length?t.map((function(e,t){return Object(s.jsxs)("p",{children:[e.name," - ",e.number," ",Object(s.jsx)("button",{onClick:function(){return n(e.id)},children:"Delete"})]},t)})):Object(s.jsx)("p",{children:"List is empty"})})},j=n(4),h=n.n(j),p="/api/persons",m=function(){return h.a.get(p).then((function(e){return e.data}))},x=function(e){return h.a.post(p,e).then((function(e){return e.data}))},O=function(e){var t="".concat(p,"/").concat(e);return h.a.delete(t).then((function(e){return e.data}))},v=function(e,t){var n="".concat(p,"/").concat(e);return h.a.put(n,t).then((function(e){return e.data}))},g=function(e){var t=e.type,n=e.text;return Object(s.jsx)("div",{style:"success"===t?Object(u.a)({},{padding:"20px",borderColor:"green",color:"green",backgroundColor:"silver",borderRadius:"5px",borderWidth:"5px",borderStyle:"solid",fontSize:"20px"}):Object(u.a)({},{padding:"20px",borderColor:"red",color:"red",backgroundColor:"silver",borderRadius:"5px",borderWidth:"5px",borderStyle:"solid",fontSize:"20px"}),children:n})},y=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)(""),a=Object(l.a)(c,2),j=a[0],h=a[1],p=Object(r.useState)(""),y=Object(l.a)(p,2),w=y[0],C=y[1],S=Object(r.useState)(""),H=Object(l.a)(S,2),k=H[0],N=H[1],T=Object(r.useState)(!0),P=Object(l.a)(T,2),A=P[0],F=P[1],I=Object(r.useState)({type:null,text:null}),L=Object(l.a)(I,2),z=L[0],D=L[1];Object(r.useEffect)((function(){m().then((function(e){o(e)})).catch((function(e){alert("error in getting all persons"),console.log(e)}))}),[]);var E=A?n:n.filter((function(e){return e.name.toLowerCase().includes(k.toLowerCase())})),J=function(){C(""),h("")};return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook"}),z&&z.text&&Object(s.jsx)(g,{text:z.text,type:z.type}),Object(s.jsx)(d,{filterChangeHandle:function(e){N(e.target.value),F(!1)},filterName:k}),Object(s.jsx)("h3",{children:"Add new person"}),Object(s.jsx)(b,{addNewPersonHandle:function(e){e.preventDefault();var t=n.filter((function(e){return e.name===w}))[0];if(t&&t.name){var r="".concat(t.name," is already added to phonebook, replace the old number with a new one?");if(window.confirm(r)){var c=Object(u.a)(Object(u.a)({},t),{},{number:j});return void v(t.id,c).then((function(e){o(n.map((function(n){return n.name!==t.name?n:e}))),J()})).catch((function(e){alert("error in updating number"),o(n.filter((function(e){return e.name!==t.name}))),console.log(e)}))}}var a={name:w,number:j};x(a).then((function(e){o([].concat(Object(i.a)(n),[e])),D({type:"success",text:"Added ".concat(e.name)}),setTimeout((function(){D({type:null,text:null})}),5e3),J()})).catch((function(e){D({type:"fail",text:"Failed to add ".concat(a.name)}),setTimeout((function(){D({type:null,text:null})}),5e3),o(Object(i.a)(n)),console.log(e)}))},newName:w,nameChangeHandle:function(e){C(e.target.value)},newNumber:j,numberChangeHandle:function(e){h(e.target.value)}}),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)(f,{personsToShow:E,deletePersonHandle:function(e){var t="Are you sure that you want to delete this person whose id is ".concat(e,"?");window.confirm(t)&&O(e).then((function(){o(n.filter((function(t){return t.id!==e}))),D({type:"success",text:"Information of ".concat(n.find((function(t){return t.id===e})).name," has been removed from server")}),setTimeout((function(){D({type:null,text:null})}),5e3)})).catch((function(t){D({type:"fail",text:"Information of ".concat(n.find((function(t){return t.id===e})).name," has been removed from server")}),setTimeout((function(){D({type:null,text:null})}),5e3),o(Object(i.a)(n)),console.log(t)}))}})]})};a.a.render(Object(s.jsx)(o.a.StrictMode,{children:Object(s.jsx)(y,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.bbb97799.chunk.js.map